(jbuild_version 1)

(executable
  ((name test)
    (libraries (oUnit algebraic_datatypes))
    (flags (-w +A-4 -warn-error +A-4))))

(rule (
  (targets (cases))
  (action (run
    cp -r
      ${ROOT}/../../implicitly_typed/algebraic_datatypes/exe/test/cases/
      .))))

(alias
  ((name runtest)
   (deps (test.exe ../repl/repl.exe cases))
   (action (run
    ${exe:test.exe}
      -repl-exe ${exe:../repl/repl.exe}
      -case-dir ./cases/))))
